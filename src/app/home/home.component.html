<mat-toolbar color="primary">
    <mat-toolbar-row>
        <span>
            <button mat-raised-button style="background-color: #000; color: #9d9d9d; padding-right: 10.6rem ; width: 20rem ;">
                <img src="https://i.imgur.com/kN9W6eQ.png" style="max-width: 150px;">
                <span style="position: absolute; font-size: 24px; right: 9px ; top: -1px ; text-transform: lowercase;">Reminder Bot</span>
            </button>
        </span>
        <span class="spacer"></span>
        <div *ngIf="user; else guest">
            <img 
                src="{{ user.image_url }}" 
                class="header-image clickable"
                matTooltip="Signed in as {{ user.name }} (Click to sign out)"
                matTooltipPosition="left"
                (click)="signOut()"
            >
        </div>
        <ng-template #guest>
            <button mat-raised-button color="accent" (click)="signIn()">Sign In with GroupMe</button>
        </ng-template>
    </mat-toolbar-row>
</mat-toolbar>

<div class="app-container" *ngIf="user; else guestHeader">
    <div class="center-all">
        <h1>Welcome, {{ user.name }}</h1>
        <p>
            Welcome to the GroupMe Reminder Bot configuration page!<br>
            Select a group from below to manage, or to add the bot to a new group.
        </p>
        <form [formGroup]="groupForm">
            <mat-form-field color="accent">
                <mat-select formControlName="group" name="group" (selectionChange)="selectGroup($event)" [matTooltip]="!groups.length ? 'Click the load icon to fetch your groups' : null" matTooltipPosition="above">
                    <mat-option *ngFor="let g of groups" [value]="g" [disabled]="!isGroupAdmin(g)" [matTooltip]="!isGroupAdmin(g) ? 'You are not an admin of this group' : null" matTooltipPosition="right">{{ g?.name }}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-icon (click)="loadGroups()" class="side-icon clickable" matTooltip="Load Groups" matTooltipPosition="above">{{ groupsLoading ? 'pending' : 'autorenew' }}</mat-icon>
            <p *ngIf="currGroup && !currGroup?.isBotRegistered">
                Bot not added to <strong>{{ currGroup.name }}</strong> yet! Add the bot by clicking below.<br> <br>
                <button mat-raised-button color="primary" (click)="addBot()">Add Bot</button>
            </p>
        </form>
        <div *ngIf="currGroup && currGroup?.isBotRegistered">
            <h2>Managing Bot â€” {{ currGroup.name }}</h2>
            <div style="display: flex;">
                <span>Members: {{ currGroup.members.length }}</span>
                <span class="spacer"></span>
                <span>Last post: {{ moment.unix(currGroup.updated_at).fromNow() }}</span>
            </div>
            <mat-tab-group>
                <mat-tab label="Remove Bot"><button mat-raised-button color="warn" (click)="deleteBot()">Remove Bot</button></mat-tab>
                <mat-tab label="Second"> Content 2 </mat-tab>
                <mat-tab label="Third"> Content 3 </mat-tab>
                <mat-tab label="Third"> Content 3 </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>
<ng-template #guestHeader>
    <div class="app-container center-h-v" >
        <h1>GroupMe Reminder Bot</h1>
        <p>Welcome to the GroupMe Reminder Bot. Sign in with your GroupMe account to get started.</p>
    </div>
</ng-template>